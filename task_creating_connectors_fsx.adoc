---
sidebar: sidebar
permalink: task_creating_connectors_fsx.html
keywords: fsx for ontap, iam, user role, create connector in aws, launch connector in aws, deploy connector in aws, aws connector, connector aws, connector permissions
summary: An Account Admin needs to deploy a Connector before you can use most Cloud Manager features. The Connector enables Cloud Manager to manage resources and processes within your public cloud environment.
---

= Create a Connector in AWS for FSx for ONTAP
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
An Account Admin needs to deploy a _Connector_ before you can use some Cloud Manager features for FSx for ONTAP. link:concept_connectors.html[Learn when a Connector is required]. The Connector enables Cloud Manager to manage resources and processes within your public cloud environment.

This page describes how to create a Connector in AWS directly from Cloud Manager. You also have the option to link:task_launching_aws_mktp.html[create the Connector from the AWS Marketplace].

These steps must be completed by a user who has the Account Admin role. A Workspace Admin can't create a Connector.

TIP: When you create your first Cloud Volumes ONTAP working environment, Cloud Manager will prompt you to create a Connector if you don't have one yet.

== Set up AWS permissions to create a Connector

Before you can deploy a Connector from Cloud Manager, you need to ensure your AWS account has the correct permissions.

.Steps

. From the AWS IAM console, create an IAM policy that includes the following actions:
+
[source,json]
"ec2:Describe*"
"kms:Describe*"
"kms:List*"
"fsx:*"
"iam:CreateServiceLinkedRole"
"ec2:CreateTags"

. Attach the policy that you created in the previous step to the IAM user who will create the Connector from Cloud Manager.

.Result

The AWS user now has the permissions required to create the Connector from Cloud Manager. You'll need to generate an AWS access key and secret key for this user to enter in Cloud Manager.

== Create a Connector in AWS

Cloud Manager enables you to create a Connector in AWS directly from its user interface.

.What you'll need

* An AWS access key and secret key for an IAM user who has the https://mysupport.netapp.com/site/info/cloud-manager-policies[required permissions^] to create a Connector.

* A VPC, subnet, and keypair in your AWS region of choice.
+
These permissions are for the Connector instance. It's a different set of permissions than what's provided in the first bullet above.
// * If you don't want Cloud Manager to automatically create an IAM role for the Connector, then you'll need to create your own https://occm-sample-policies.s3.amazonaws.com/Policy_for_Cloud_Manager_3.8.7.json[using this policy^].

.Steps

. If you're creating your first Working Environment, click *Add Working Environment* and follow the prompts. Otherwise, click the *Connector* drop-down and select *Add Connector*.
+
image:screenshot_connector_add.gif[A screenshot that shows the Connector icon in the header and the Add Connector action.]

. Choose *Amazon Web Services* as your cloud provider and click *Continue*.
+
The Connector must have a network connection to the type of working environment you're creating and the services you're planning to enable.
+
link:reference_networking_cloud_manager.html[Learn more about networking requirements for the Connector].

. Follow the steps in the wizard to create the Connector:

* *Get Ready*: Review what you'll need.

* *AWS Credentials*: Enter a valid AWS access key and secret key for an IAM user with the required FSx for ONTAP permissions. Alternatively, you can link:https://aws.amazon.com/marketplace/pp/B018REK8QG?qid=1507515215588&sr=0-5&ref_=srh_res_product_title[manually launch a Connector in AWS Marketplace^]. If the key entered  for an IAM user role with FSx for ONTAP permissions.

* *Details*: Enter a name for the instance, specify tags, and choose whether you want Cloud Manager to create a new role for this Connector or select an existing role created by the account admin.

* *Network*: Specify a VPC, subnet, and key pair for the instance, choose whether to enable a public IP address, and optionally specify a proxy configuration.

* *Security Group*: Choose whether to create a new security group or whether to select an existing security group that allows inbound HTTP, HTTPS, and SSH access.
+
NOTE: There's no incoming traffic to the Connector, unless you initiate it. HTTP and HTTPS provide access to the link:concept_connectors.html#the-local-user-interface[local UI], which you'll use in rare circumstances. SSH is only needed if you need to connect to the host for troubleshooting.

* *Review*: Review your selections to verify that your set up is correct.

. Click *Add*.
+
The instance should be ready in about 7 minutes. You should stay on the page until the process is complete.
