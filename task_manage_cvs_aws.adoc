---
sidebar: sidebar
permalink: task_manage_cvs_aws.html
keywords: cloud volumes service for aws, cloud volumes, create cloud volumes, discover cloud volumes service for aws, delete cloud volumes, cloud volumes service subscription, discover cloud volumes service subscription, access key, secret key, discover region, service level, allowed clients, create snapshots
summary: Cloud Manager enables you to create cloud volumes based on your Cloud Volumes Service for AWS subscription. You can also discover cloud volumes that you have already created from the Cloud Volumes Service interface and add them to a working environment.
---

= Managing Cloud Volumes Service for AWS
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
Cloud Manager enables you to create cloud volumes based on your https://cloud.netapp.com/cloud-volumes-service-for-aws[Cloud Volumes Service for AWS^] subscription. You can also discover cloud volumes that you have already created from the Cloud Volumes Service interface and add them to a working environment.

NetApp Cloud Volumes Service for AWS is a cloud native file service that provides NAS volumes over NFS and SMB with all-flash performance. This service enables any workload, including legacy applications, to run in the AWS cloud.

There are no charges to discover a Cloud Volumes Service for AWS region from Cloud Manager.

== Benefits of using Cloud Volumes Service for AWS

Cloud Volumes Service for AWS provides the following benefits:

* Fully managed service, therefore no need to configure or manage storage devices

* Support for NFSv3 and NFSv4.1, and SMB 3.0 and 3.1.1 NAS protocols

* Secure access to Linux and Windows Elastic Container Service (ECS) instances, with support including the following:

** Amazon Linux 2, Red Hat Enterprise Linux 7.5, SLES 12 SP3, and Ubuntu 16.04 LTS

** Windows Server 2008 R2, Windows Server 2012 R2, and Windows Server 2016

* Choice of bundled and pay-as-you-go pricing

== Before you get started

* Cloud Manager can discover existing Cloud Volumes Service for AWS subscriptions and volumes. See the https://docs.netapp.com/us-en/cloud_volumes/aws/media/cvs_aws_account_setup.pdf[NetApp Cloud Volumes Service for AWS Account Setup Guide^] if you haven't set up your subscription yet. You must follow this setup process for each region before you can add the AWS subscriptions and volumes in Cloud Manager.

* You need to obtain the Cloud Volumes API key and secret key so you can provide them to Cloud Manager. https://docs.netapp.com/us-en/cloud_volumes/aws/reference_cloud_volume_apis.html#finding-the-api-url-api-key-and-secret-key[For instructions, refer to Cloud Volumes Service for AWS documentation^].

== Add your Cloud Volumes Service for AWS subscription

Regardless of whether you have already created volumes from the Cloud Volumes Service user interface, or if you just signed up for Cloud Volumes Service for AWS and have no volumes yet, the first step is to create a working environment for the volumes based on your AWS subscription.

If cloud volumes already exist for this subscription, then the volumes are automatically added to the new working environment. If you haven't added any cloud volumes yet for the AWS subscription, then you do that after you create the new working environment.

*Note:* If you have subscriptions and volumes in multiple AWS regions, you need to perform this task for each region.

.Before you begin

You must have the following information available when adding a subscription in each region:

* Cloud Volumes API key and Secret key: https://docs.netapp.com/us-en/cloud_volumes/aws/reference_cloud_volume_apis.html#finding-the-api-url-api-key-and-secret-key[See the Cloud Volumes Service for AWS documentation to get this information^].

* The AWS region where the subscription was created.

.Steps

. In Cloud Manager, add a new Working Environment, select the location *Amazon Web Services*, and click *Continue*.

. Select *Cloud Volumes Service* and click *Continue*.
+
image:screenshot_add_cvs_aws_working_env.png[A screenshot of adding a working environment for a Cloud Volumes Service for AWS subscription]

. Provide information about your Cloud Volumes Service subscription:

.. Enter the Working Environment Name you want to use.
.. Enter the Cloud Volumes Service API key and secret key.
.. Select the AWS region where your cloud volumes reside, or where they will be deployed.
.. Click *Add*.
+
image:screenshot_add_cvs_aws_credentials.png[A screenshot of adding credentials for a Cloud Volumes Service for AWS subscription]

.Result

Cloud Manager displays your Cloud Volumes Service for AWS configuration on the Working Environments page.

image:screenshot_cvs_aws_cloud.gif[A screenshot of Cloud Volumes Service for AWS on the working environments page.]

If cloud volumes already exist for this subscription, then the volumes are automatically added to the new working environment, as shown in the screenshot. If no cloud volumes exist for this subscription, then you can create them now.

== Create cloud volumes

When using the Cloud Manager SaaS-based user interface, you can create your first volume directly from Cloud Manager after you have set up your Cloud Volumes Service for AWS subscription. In the past, the first volume had to be created directly in the Cloud Volumes Service user interface.

.Before you begin

* You will need this information when creating the first volume in a new region/working environment:

** AWS account ID: A 12-digit Amazon account identifier with no dashes. To find your account ID, refer to this link:https://docs.aws.amazon.com/IAM/latest/UserGuide/console_account-alias.html[AWS topic].

** Classless Inter-Domain Routing (CIDR) Block: An unused IPv4 CIDR block. The network prefix must range between /16 and /28, and it must also fall within the ranges reserved for private networks (RFC 1918). Do not choose a network that overlaps your VPC CIDR allocations.

* If you want to use CIFS in AWS, you must have set up DNS and Active Directory.

* When planning to create an SMB volume, you must have a Windows Active Directory server available to which you can connect. You will enter this information when creating the volume. Also, make sure that the Admin user is able to create a machine account in the Organizational unit (OU) path specified.

.Steps

. Select the new working environment and click *Add New Volume*.

. If you are adding the first volume to the working environment in the region, you have to add AWS networking information.
.. Enter the IPv4 range (CIDR) for the region.
.. Enter the 12-digit AWS account ID (with no dashes) to connect your Cloud Volumes account to your AWS account.
.. Click *Continue*.
+
image:screenshot_cvs_aws_network_setup.png[Screenshot of the network setup page where you add the CIDR and AWS account ID]

. The Accepting Virtual Interfaces page describes some steps you will need to perform after you add the volume so that you are prepared to complete that step. Just click *Continue* again.

. In the Details & Tags page, enter details about the volume:

.. Enter a name for the volume.
.. Specify a size within the range of 100 GiB to 90,000 GiB (equivalent to 88 TiBs).
.. Specify a service level: Standard, Premium, or Extreme.
+
link:reference_cvs_service_levels_and_quotas.html#service-levels[Learn more about these service levels^].
.. Enter one or more tag name to categorize the volume if you want.
.. Click *Continue*

. In the Protocol page, select NFS, SMB, or Dual Protocol and then define the details.

.. In the Volume Path field, specify the path you will see when you mount the volume.
.. In the NFS Version field, select NFSv3, NFSv4.1, or both depending on your requirements.
..
+
Some of the fields in this page are self-explanatory.
+
The following image shows the Volume page filled out for the CIFS protocol:
+
image:screenshot_cot_vol.gif[Screen shot: Shows the Volume page filled out for a Cloud Volumes ONTAP instance.]

. *CIFS Setup*: If you chose the CIFS protocol, set up a CIFS server.
+
[cols=2*,options="header",cols="25,75"]
|===
| Field
| Description

| DNS Primary and Secondary IP Address | The IP addresses of the DNS servers that provide name resolution for the CIFS server.
The listed DNS servers must contain the service location records (SRV) needed to locate the Active Directory LDAP servers and domain controllers for the domain that the CIFS server will join.

| Active Directory Domain to join | The FQDN of the Active Directory (AD) domain that you want the CIFS server to join.

| Credentials authorized to join the domain | The name and password of a Windows account with sufficient privileges to add computers to the specified Organizational Unit (OU) within the AD domain.

| CIFS server NetBIOS name | A CIFS server name that is unique in the AD domain.

| Organizational Unit | The organizational unit within the AD domain to associate with the CIFS server. The default is CN=Computers.
If you configure AWS Managed Microsoft AD as the AD server for Cloud Volumes ONTAP, you should enter *OU=Computers,OU=corp* in this field.

| DNS Domain | The DNS domain for the Cloud Volumes ONTAP storage virtual machine (SVM). In most cases, the domain is the same as the AD domain.
|===

See link:task_manage_cloud_volumes.html#create_or_modify_a_snapshot_policy[Creating a snapshot policy] for more information about snapshot functionality.


== Mounting a cloud volume

You can mount a cloud volume to your AWS instance. Cloud volumes currently support NFSv3 and NFSv4.1 for Linux and UNIX clients, and SMB 3.0 and 3.1.1 for Windows clients.

*Note:* Please use the highlighted protocol/dialect supported by your client.

.Steps
. Open the working environment.
. Hover over the volume and click *Mount the volume*.
+
NFS and SMB volumes display mount instructions for that protocol. Dual-protocol volumes provide both sets of instructions.
+
*NFS example:*
+
image:screenshot_cvs_aws_nfs_mount.png[Mount instructions for NFS volumes]
+
The maximum I/O size defined by the `rsize` and `wsize` options is 1048576, however 65536 is the recommended default for most use cases.
+
Note that Linux clients will default to NFSv4.1 unless the version is specified with the `vers=`` option.
+
*SMB example:*
+
image:screenshot_cvs_aws_smb_mount.png[Mount instructions for SMB volumes]
. You can hover over the commands and copy them to your clipboard to make this process easier.
. Connect to your Amazon Elastic Compute Cloud (EC2) instance by using an SSH or RDP client, and then follow the mount instructions for your instance.
+
After completing the steps in the mount instructions, you have successfully mounted the cloud volume to your AWS instance.

== Creating additional cloud volumes

Cloud Manager enables you to create NFSv3 cloud volumes. You can only create cloud volumes with an initial size and single export policy. Editing the volume must be done from the Cloud Volume Service user interface.

. Open the working environment.

. Click *Add New Volume*.

. Enter details about the volume:

.. Enter a name for the volume.
.. Specify a size within the range of 100 GiB to 90,000 GiB (equivalent to 88 TiBs).
+
NOTE: Cloud Manager displays volumes in GiB, while the Cloud Volumes Service displays volumes in GB.

.. Specify a service level: Standard, Premium, or Extreme.
+
https://docs.netapp.com/us-en/cloud_volumes/aws/reference_selecting_service_level_and_quota.html#service-levels[Learn more about these service levels^].
.. Choose a region. You can create the volume in a region that Cloud Manager has discovered.
.. Restrict client access by specifying an IP address or Classless Inter-Domain Routing (CIDR).
+
image:screenshot_cvs_aws_add_volume.gif[A screenshot of the add new volume screen for Cloud Volumes Service for AWS.]

. Click *Go*.

== Managing existing volumes

You can manage existing volumes as your storage needs change. You can view, edit, restore, and delete volumes.

.Steps

. Open the working environment.
. Hover over the volume.
+
image:screenshot_cvs_aws_volume_hover_menu.png[A screenshot of the volume hover menu that allows you to perform volume tasks]
. Manage your volumes:
+
[cols=2*,options="header",cols="30,70"]
|===

| Task
| Action

| View information about a volume | Select a volume, and then click *Info*.

| Edit a volume (read-write volumes only)
a|
.. Select a volume, and then click *Edit*.
.. Modify the volume's properties and then click *Update*.

| Get the NFS or SMB mount command
a|
.. Select a volume, and then click *Mount the volume*.
.. Click *Copy* to copy the command(s).

| Create a Snapshot copy on demand
a|
.. Select a volume, and then click *Create a Snapshot copy*.
.. Change the name, if needed, and then click *Create*.

| Restore data from a Snapshot copy to a new volume
a|
.. Select a volume, and then click *Restore to a new volume*.
.. Select a Snapshot copy, enter a name for the new volume, and then click *Restore*.

| Replace the volume with the contents of a Snapshot copy
a|
.. Select a volume, and then click *Restore the volume*.
.. Select a Snapshot copy and click *Restore*.

| Delete a Snapshot copy
a|
.. Select a volume, and then click *Delete a Snapshot copy*.

| Delete a volume
a|
.. Unmount the volume from all clients:
* On Linux clients, use the `umount` command.
* On Windows clients, click *Disconnect network drive*.
.. Select a volume, and then click *Delete*.
.. Click *Delete* again to confirm.

|===

== Remove Cloud Volumes Service from Cloud Manager

You can remove a Cloud Volumes Service for AWS subscription and all existing volumes from Cloud Manager. The volumes are not deleted, they are just removed from the Cloud Manager interface.

.Steps
 . Open the working environment.
 . Click the image:screenshot_gallery_options.gif[] button at the top of the page and click *Remove Cloud Volumes Service*.
. In the confirmation dialog box, click *Remove*.

== Getting help

Use the Cloud Manager chat for general service questions.

For technical support issues associated with your cloud volumes, use your 20 digit “930” serial number located in the "Support" tab of the Cloud Volumes Service user interface. Use this support ID when opening a web ticket or calling for support. Be sure to activate your Cloud Volumes Service serial number for support from the Cloud Volumes Service user interface. https://docs.netapp.com/us-en/cloud_volumes/aws/task_activating_support_entitlement.html[Those steps are explained here^].

== Limitations

* Cloud Manager doesn't support data replication between working environments when using Cloud Volumes Service volumes.

* Removing your Cloud Volumes Service for AWS subscription from Cloud Manager isn't supported. You can do this only through the Cloud Volumes Service for AWS interface.

== Related links

* https://cloud.netapp.com/cloud-volumes-service-for-aws[NetApp Cloud Central: Cloud Volumes Service for AWS^]
* https://docs.netapp.com/us-en/cloud_volumes/aws/[NetApp Cloud Volumes Service for AWS documentation^]
